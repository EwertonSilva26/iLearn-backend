DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `insert_user_student`(email varchar(50), user_pwd varchar(60), 
student_name varchar(40), middle_name varchar(40), last_name varchar(40))
BEGIN
	DECLARE userId INT;

	INSERT INTO tb_user (user_email, user_pwd) VALUES (email, user_pwd);
	
    SELECT id_user FROM tb_user WHERE user_email = email INTO userId;

	INSERT INTO tb_student (student_first_name, student_middle_name, student_last_name, id_user) 
	VALUES (student_name, middle_name, last_name, userId);
END $$
DELIMITER ;

CALL insert_user_student("pedro@aluno.com", "$2b$10$/R.EI4p/RAVoXrJ.OD730uZcqeh7whtgUSzq42m80uq9kzuoVgDtm", "ewerton", "soares", "silva");