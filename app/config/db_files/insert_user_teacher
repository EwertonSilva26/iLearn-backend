DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `insert_user_teacher`(email varchar(50), user_pwd varchar(60), 
teacher_name varchar(40), middle_name varchar(40), last_name varchar(40))
BEGIN
	DECLARE userId INT;

	INSERT INTO tb_user (user_email, user_pwd) VALUES (email, user_pwd);
	
    SELECT id_user FROM tb_user WHERE user_email = email INTO userId;

	INSERT INTO tb_teacher (teacher_first_name, teacher_middle_name, teacher_last_name, id_user) 
	VALUES (teacher_name, middle_name, last_name, userId);
END $$
DELIMITER ;

CALL insert_user_teacher("professor@professor.com", 
"$2b$10$/R.EI4p/RAVoXrJ.OD730uZcqeh7whtgUSzq42m80uq9kzuoVgDtm", "professor", "silva", "sauro");